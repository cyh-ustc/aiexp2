 robert elz said date wed aug from chris garrigues message id so i ll probably poke around at the sequences performance issues well there s this wonderful piece of code in mhseqexpand hack to weed out sequence numbers for messages that don t exist foreach m rseq if file exists mhprofile path folder m exmh debug mhprofile path folder m not found set ix lsearch seq m set seq lreplace seq ix ix else real hack at least i m up front about my hacks break which is going to run slow if a sequence happens to start with a bunch of messages that don t exist i m not sure why it is important that the first message in the sequence returned exists but not necessarily any of the others but i m sure glad it is as mhseqexpand gets called lots and i don t know if i could cope if it were checking every file in the sequences it is looking at all the time that was my thinking my recollection about the first message being valid is that the ftoc code wants to find that message to start its highlighting for example or you are selecting a message to display it may help to keep a list of the valid message numbers for the current folder though that would then need to be verified against changes to the directory does tcl have a directory read function i assume so glob nocomplain mhprofile path folder will return an unsorted list of the directory s contents but the thought of keeping an in memory list of valid messages is not fun exmh already maintains in core lists of messages in sequences which is already pretty tricky mh sequence also goes and rereads the files mh sequences and the context file but i m not sure how frequently that one is called in some places i maintain caches of files by checking their modify time but the sequence files are soo small that by the time you stat them to check their date stamp you could just read them again also now that we checkpoint message state on every message view that file will change every time in the old days exmh used to cache a bunch of state about the folder brent welch software architect panasas inc pioneering the world s most scalable and agile storage network www panasas com welch panasas com exmh workers mailing list exmh workers redhat com https listman redhat com mailman listinfo exmh workers 